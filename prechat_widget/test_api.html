<!DOCTYPE html>
<html>
<head>
    <title>Test Django REST API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .endpoint { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .response { background: #f5f5f5; padding: 10px; margin-top: 10px; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Django REST API Test</h1>
    
    <div class="endpoint">
        <h3>GET /api/users/ - List all users</h3>
        <button onclick="testUsersList()">Test Users List</button>
        <div id="users-list-response" class="response"></div>
    </div>
    
    <div class="endpoint">
        <h3>GET /api/users/1/ - Get user details</h3>
        <button onclick="testUserDetail(1)">Test User Detail (ID: 1)</button>
        <div id="user-detail-response" class="response"></div>
    </div>
    
    <div class="endpoint">
        <h3>GET /api/users/1/conversations/ - Get user conversations</h3>
        <button onclick="testUserConversations(1)">Test User Conversations (ID: 1)</button>
        <div id="user-conversations-response" class="response"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:9000/api';

        async function testUsersList() {
            try {
                const response = await fetch(`${API_BASE}/users/`);
                const data = await response.json();
                document.getElementById('users-list-response').innerHTML = 
                    `<strong>Status:</strong> ${response.status}<br>
                     <strong>Response:</strong><pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('users-list-response').innerHTML = 
                    `<strong>Error:</strong> ${error.message}`;
            }
        }

        async function testUserDetail(userId) {
            try {
                const response = await fetch(`${API_BASE}/users/${userId}/`);
                const data = await response.json();
                document.getElementById('user-detail-response').innerHTML = 
                    `<strong>Status:</strong> ${response.status}<br>
                     <strong>Response:</strong><pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('user-detail-response').innerHTML = 
                    `<strong>Error:</strong> ${error.message}`;
            }
        }

        async function testUserConversations(userId) {
            try {
                const response = await fetch(`${API_BASE}/users/${userId}/conversations/`);
                const data = await response.json();
                document.getElementById('user-conversations-response').innerHTML = 
                    `<strong>Status:</strong> ${response.status}<br>
                     <strong>Response:</strong><pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('user-conversations-response').innerHTML = 
                    `<strong>Error:</strong> ${error.message}`;
            }
        }
    </script>
</body>
</html>
